<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Node :: Querying Data in SQLite Database from Node.js Applications | Paran.Blue</title><meta name=keywords content="node,sqlite3"><meta name=description content="Summary: in this tutorial, you will learn how to query data from the SQLite database from a Node.js application using sqlite3 API.
To query data in SQLite database from a Node.js application, you use these steps:
 Open a database connection. Execute a SELECT statement and process the result set. Close the database connection.  The sqlite3 module provides you with some methods for querying data such as all(), each() and get()."><meta name=author content="bynaki"><link rel=canonical href=https://www.sqlitetutorial.net/sqlite-nodejs/query/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.f35765cb8d4ded22290255d068770252367222a0c927f248f2ffdd0561769869.css integrity="sha256-81dly41N7SIpAlXQaHcCUjZyIqDJJ/JI8v/dBWF2mGk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://bynaki.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://bynaki.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://bynaki.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://bynaki.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://bynaki.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.85.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Node :: Querying Data in SQLite Database from Node.js Applications"><meta property="og:description" content="Summary: in this tutorial, you will learn how to query data from the SQLite database from a Node.js application using sqlite3 API.
To query data in SQLite database from a Node.js application, you use these steps:
 Open a database connection. Execute a SELECT statement and process the result set. Close the database connection.  The sqlite3 module provides you with some methods for querying data such as all(), each() and get()."><meta property="og:type" content="article"><meta property="og:url" content="https://bynaki.github.io/posts/node.querying-sqlite/"><meta property="og:image" content="https://bynaki.github.io/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-23T00:21:52+09:00"><meta property="article:modified_time" content="2021-07-23T00:21:52+09:00"><meta property="og:site_name" content="Paran.Blue"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bynaki.github.io/%3Cimage%20path/url%3E"><meta name=twitter:title content="Node :: Querying Data in SQLite Database from Node.js Applications"><meta name=twitter:description content="Summary: in this tutorial, you will learn how to query data from the SQLite database from a Node.js application using sqlite3 API.
To query data in SQLite database from a Node.js application, you use these steps:
 Open a database connection. Execute a SELECT statement and process the result set. Close the database connection.  The sqlite3 module provides you with some methods for querying data such as all(), each() and get()."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://bynaki.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Node :: Querying Data in SQLite Database from Node.js Applications","item":"https://bynaki.github.io/posts/node.querying-sqlite/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Node :: Querying Data in SQLite Database from Node.js Applications","name":"Node :: Querying Data in SQLite Database from Node.js Applications","description":"Summary: in this tutorial, you will learn how to query data from the SQLite database from a Node.js application using sqlite3 API.\nTo query data in SQLite database from a Node.js application, you use these steps:\n Open a database connection. Execute a SELECT statement and process the result set. Close the database connection.  The sqlite3 module provides you with some methods for querying data such as all(), each() and get().","keywords":["node","sqlite3"],"articleBody":"Summary: in this tutorial, you will learn how to query data from the SQLite database from a Node.js application using sqlite3 API.\nTo query data in SQLite database from a Node.js application, you use these steps:\n Open a database connection. Execute a SELECT statement and process the result set. Close the database connection.  The sqlite3 module provides you with some methods for querying data such as all(), each() and get().\nQuerying all rows with all() method The all() method allows you to execute an SQL query with specified parameters and call a callback to access the rows in the result set.\nThe following is the signature of the all() method:\ndb.all(sql,params,(err, rows ) = { // process rows here }); The err argument stores the error detail in case there was an error occurred during the execution of the query. Otherwise, the err will be null. If the query is executed successfully, the rows argument contains the result set of the query.\nBecause the all() method retrieves all rows and places them in the memory, therefore, for the large result set, you should use the each() method.\nThe following example illustrates how to query data from the playlists table in the sample database using the all() method:\nconst sqlite3 = require('sqlite3').verbose(); // open the database let db = new sqlite3.Database('./db/chinook.db'); let sql = `SELECT DISTINCT Name name FROM playlists ORDER BY name`; db.all(sql, [], (err, rows) = { if (err) { throw err; } rows.forEach((row) = { console.log(row.name); }); }); // close the database connection db.close(); Let’s run the program.\nnode all.js 90's Music Audiobooks Brazilian Music Classical Classical 101 - Deep Cuts Classical 101 - Next Steps Classical 101 - The Basics Grunge Heavy Metal Classic Movies Music Music Videos On-The-Go 1 TV Shows The output shows all playlists as expected.\nQuery the first row in the result set When you know that the result set contains zero or one row e.g., querying a row based on the primary key or querying with only one aggregate function such as count, sum, max, min, etc., you can use the get() method of Database object.\ndb.get(sql, params, (err, row) = { // process the row here }); The get() method executes an SQL query and calls the callback function on the first result row. In case the result set is empty, the row argument is undefined.\nThe following get.js program demonstrates how to query a playlist by its id:\nconst sqlite3 = require('sqlite3').verbose(); // open the database let db = new sqlite3.Database('./db/chinook.db'); let sql = `SELECT PlaylistId id, Name name FROM playlists WHERE PlaylistId = ?`; let playlistId = 1; // first row only db.get(sql, [playlistId], (err, row) = { if (err) { return console.error(err.message); } return row ? console.log(row.id, row.name) : console.log(`No playlist found with the id ${playlistId}`); }); // close the database connection db.close(); Let’s run the get.js program.\nnode get.js 1 'Music' The output shows the Music playlist which is correct.\nIf you change the playlistId to 0 and execute the get.js program again:\nnode get.js No playlist found with the id 0 It showed that no playlist found with id 0 as expected.\nQuery rows with each() method The each() method executes an SQL query with specified parameters and calls a callback for every row in the result set.\nThe following illustrates the signature of the each() method:\ndb.each(sql,params, (err, result) = { // process each row here }); If the result set is empty, the callback is never called. In case there is an error, the err parameter contains the detailed information.\nThe following each.js program illustrates how to use the each() method to query customer’s data from the customers table.\nconst sqlite3 = require('sqlite3').verbose(); // open the database let db = new sqlite3.Database('../db/chinook.db'); let sql = `SELECT FirstName firstName, LastName lastName, Email email FROM customers WHERE Country = ? ORDER BY FirstName`; db.each(sql, ['USA'], (err, row) = { if (err) { throw err; } console.log(`${row.firstName}${row.lastName}- ${row.email}`); }); // close the database connection db.close(); Let’s run the each.js program:\nnode each.js Dan Miller - dmiller@comcast.com Frank Harris - fharris@google.com Frank Ralston - fralston@gmail.com Heather Leacock - hleacock@gmail.com Jack Smith - jacksmith@microsoft.com John Gordon - johngordon22@yahoo.com Julia Barnett - jubarnett@gmail.com Kathy Chase - kachase@hotmail.com Michelle Brooks - michelleb@aol.com Patrick Gray - patrick.gray@aol.com Richard Cunningham - ricunningham@hotmail.com Tim Goyer - tgoyer@apple.com Victor Stevens - vstevens@yahoo.com As you see, the callback function was called for each row to print out the customer’s information.\nIn this tutorial, you have learned how to use various methods of the Database object to query data from the SQLite database.\nSee Also  https://www.sqlitetutorial.net/sqlite-nodejs/  ","wordCount":"769","inLanguage":"en","image":"https://bynaki.github.io/%3Cimage%20path/url%3E","datePublished":"2021-07-23T00:21:52+09:00","dateModified":"2021-07-23T00:21:52+09:00","author":{"@type":"Person","name":"bynaki"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bynaki.github.io/posts/node.querying-sqlite/"},"publisher":{"@type":"Organization","name":"Paran.Blue","logo":{"@type":"ImageObject","url":"https://bynaki.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://bynaki.github.io accesskey=h title="Paran.Blue (Alt + H)">Paran.Blue</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://bynaki.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bynaki.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://bynaki.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://github.com/bynaki title=github><span>github</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://bynaki.github.io>Home</a>&nbsp;»&nbsp;<a href=https://bynaki.github.io/posts/>Posts</a></div><h1 class=post-title>Node :: Querying Data in SQLite Database from Node.js Applications</h1><div class=post-meta>July 23, 2021&nbsp;·&nbsp;4 min&nbsp;·&nbsp;bynaki&nbsp;|&nbsp;<a href=https://github.com/bynaki/paran.blue/blob/main/content/posts/node.querying-sqlite.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#querying-all-rows-with-all-method aria-label="Querying all rows with all() method">Querying all rows with all() method</a></li><li><a href=#query-the-first-row-in-the-result-set aria-label="Query the first row in the result set">Query the first row in the result set</a></li><li><a href=#query-rows-with-each-method aria-label="Query rows with each() method">Query rows with each() method</a></li><li><a href=#see-also aria-label="See Also">See Also</a></li></ul></div></details></div><div class=post-content><p><strong>Summary</strong>: in this tutorial, you will learn how to query data from the SQLite database from a Node.js application using sqlite3 API.</p><p>To query data in SQLite database from a Node.js application, you use these steps:</p><ol><li><a href=https://www.sqlitetutorial.net/sqlite-nodejs/connect/>Open a database connection</a>.</li><li>Execute a <code>SELECT</code> statement and process the result set.</li><li>Close the database connection.</li></ol><p>The <code>sqlite3</code> module provides you with some methods for querying data such as <code>all()</code>, <code>each()</code> and <code>get()</code>.</p><h2 id=querying-all-rows-with-all-method>Querying all rows with all() method<a hidden class=anchor aria-hidden=true href=#querying-all-rows-with-all-method>#</a></h2><p>The <code>all()</code> method allows you to execute an SQL query with specified parameters and call a callback to access the rows in the result set.</p><p>The following is the signature of the <code>all()</code> method:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>sql</span>,<span style=color:#a6e22e>params</span>,(<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>rows</span> ) =&gt; {
    <span style=color:#75715e>// process rows here    
</span><span style=color:#75715e></span>});
</code></pre></div><p>The <code>err</code> argument stores the error detail in case there was an error occurred during the execution of the query. Otherwise, the <code>err</code> will be <code>null</code>. If the query is executed successfully, the <code>rows</code> argument contains the result set of the query.</p><p>Because the <code>all()</code> method retrieves all rows and places them in the memory, therefore, for the large result set, you should use the <code>each()</code> method.</p><p>The following example illustrates how to query data from the <code>playlists</code> table in the sample database using the <code>all()</code> method:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sqlite3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;sqlite3&#39;</span>).<span style=color:#a6e22e>verbose</span>();

<span style=color:#75715e>// open the database
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>db</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>sqlite3</span>.<span style=color:#a6e22e>Database</span>(<span style=color:#e6db74>&#39;./db/chinook.db&#39;</span>);

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sql</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`SELECT DISTINCT Name name FROM playlists
</span><span style=color:#e6db74>           ORDER BY name`</span>;

<span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>all</span>(<span style=color:#a6e22e>sql</span>, [], (<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>rows</span>) =&gt; {
  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span>) {
    <span style=color:#66d9ef>throw</span> <span style=color:#a6e22e>err</span>;
  }
  <span style=color:#a6e22e>rows</span>.<span style=color:#a6e22e>forEach</span>((<span style=color:#a6e22e>row</span>) =&gt; {
    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>name</span>);
  });
});

<span style=color:#75715e>// close the database connection
</span><span style=color:#75715e></span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>close</span>();
</code></pre></div><p>Let’s run the program.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>&gt;node all.js
90<span style=color:#960050;background-color:#1e0010>&#39;</span>s Music
Audiobooks
Brazilian Music
Classical
Classical <span style=color:#ae81ff>101</span> - Deep Cuts
Classical <span style=color:#ae81ff>101</span> - Next Steps
Classical <span style=color:#ae81ff>101</span> - The Basics
Grunge
Heavy Metal Classic
Movies
Music
Music Videos
On-The-Go <span style=color:#ae81ff>1</span>
TV Shows
</code></pre></div><p>The output shows all playlists as expected.</p><h2 id=query-the-first-row-in-the-result-set>Query the first row in the result set<a hidden class=anchor aria-hidden=true href=#query-the-first-row-in-the-result-set>#</a></h2><p>When you know that the result set contains zero or one row e.g., querying a row based on the primary key or querying with only one aggregate function such as count, sum, max, min, etc., you can use the <code>get()</code> method of <code>Database</code> object.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>sql</span>, <span style=color:#a6e22e>params</span>, (<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>row</span>) =&gt; {
    <span style=color:#75715e>// process the row here 
</span><span style=color:#75715e></span>});
</code></pre></div><p>The <code>get()</code> method executes an SQL query and calls the callback function on the first result row. In case the result set is empty, the <code>row</code> argument is <code>undefined</code>.</p><p>The following <code>get.js</code> program demonstrates how to query a playlist by its id:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sqlite3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;sqlite3&#39;</span>).<span style=color:#a6e22e>verbose</span>();

<span style=color:#75715e>// open the database
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>db</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>sqlite3</span>.<span style=color:#a6e22e>Database</span>(<span style=color:#e6db74>&#39;./db/chinook.db&#39;</span>);

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sql</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`SELECT PlaylistId id,
</span><span style=color:#e6db74>                  Name name
</span><span style=color:#e6db74>           FROM playlists
</span><span style=color:#e6db74>           WHERE PlaylistId  = ?`</span>;
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>playlistId</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;

<span style=color:#75715e>// first row only
</span><span style=color:#75715e></span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>sql</span>, [<span style=color:#a6e22e>playlistId</span>], (<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>row</span>) =&gt; {
  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span>) {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>message</span>);
  }
  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>row</span>
    <span style=color:#f92672>?</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>name</span>)
    <span style=color:#f92672>:</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`No playlist found with the id </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>playlistId</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);

});

<span style=color:#75715e>// close the database connection
</span><span style=color:#75715e></span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>close</span>();
</code></pre></div><p>Let’s run the <code>get.js</code> program.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>&gt;node get.js
<span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#39;Music&#39;</span>
</code></pre></div><p>The output shows the <code>Music</code> playlist which is correct.</p><p>If you change the <code>playlistId</code> to 0 and execute the <code>get.js</code> program again:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>&gt;node get.js
No playlist found with the id <span style=color:#ae81ff>0</span>
</code></pre></div><p>It showed that no playlist found with id 0 as expected.</p><h2 id=query-rows-with-each-method>Query rows with each() method<a hidden class=anchor aria-hidden=true href=#query-rows-with-each-method>#</a></h2><p>The <code>each()</code> method executes an SQL query with specified parameters and calls a callback for every row in the result set.</p><p>The following illustrates the signature of the <code>each()</code> method:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>each</span>(<span style=color:#a6e22e>sql</span>,<span style=color:#a6e22e>params</span>, (<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>result</span>) =&gt; {
   <span style=color:#75715e>// process each row here
</span><span style=color:#75715e></span>});
</code></pre></div><p>If the result set is empty, the callback is never called. In case there is an error, the <code>err</code> parameter contains the detailed information.</p><p>The following <code>each.js</code> program illustrates how to use the <code>each()</code> method to query customer’s data from the <code>customers</code> table.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sqlite3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;sqlite3&#39;</span>).<span style=color:#a6e22e>verbose</span>();

<span style=color:#75715e>// open the database
</span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>db</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>sqlite3</span>.<span style=color:#a6e22e>Database</span>(<span style=color:#e6db74>&#39;../db/chinook.db&#39;</span>);

<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sql</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`SELECT FirstName firstName,
</span><span style=color:#e6db74>                  LastName lastName,
</span><span style=color:#e6db74>                  Email email
</span><span style=color:#e6db74>            FROM customers
</span><span style=color:#e6db74>            WHERE Country = ?
</span><span style=color:#e6db74>            ORDER BY FirstName`</span>;

<span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>each</span>(<span style=color:#a6e22e>sql</span>, [<span style=color:#e6db74>&#39;USA&#39;</span>], (<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>row</span>) =&gt; {
  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span>) {
    <span style=color:#66d9ef>throw</span> <span style=color:#a6e22e>err</span>;
  }
  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>firstName</span><span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>lastName</span><span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>row</span>.<span style=color:#a6e22e>email</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
});

<span style=color:#75715e>// close the database connection
</span><span style=color:#75715e></span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>close</span>();
</code></pre></div><p>Let’s run the <code>each.js</code> program:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>&gt;node each.js
Dan Miller - dmiller@comcast.com
Frank Harris - fharris@google.com
Frank Ralston - fralston@gmail.com
Heather Leacock - hleacock@gmail.com
Jack Smith - jacksmith@microsoft.com
John Gordon - johngordon22@yahoo.com
Julia Barnett - jubarnett@gmail.com
Kathy Chase - kachase@hotmail.com
Michelle Brooks - michelleb@aol.com
Patrick Gray - patrick.gray@aol.com
Richard Cunningham - ricunningham@hotmail.com
Tim Goyer - tgoyer@apple.com
Victor Stevens - vstevens@yahoo.com
</code></pre></div><p>As you see, the callback function was called for each row to print out the customer’s information.</p><p>In this tutorial, you have learned how to use various methods of the <code>Database</code> object to query data from the SQLite database.</p><h2 id=see-also>See Also<a hidden class=anchor aria-hidden=true href=#see-also>#</a></h2><ul><li><a href=https://www.sqlitetutorial.net/sqlite-nodejs/>https://www.sqlitetutorial.net/sqlite-nodejs/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://bynaki.github.io/tags/node/>node</a></li><li><a href=https://bynaki.github.io/tags/sqlite3/>sqlite3</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2021</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        Written by 
        <a href=/ rel=noopener target=_blank>bynaki</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>